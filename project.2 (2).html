
        <!DOCTYPE html>
        <html>
        <head>
        <style></style>
        </head>
        <body>
        <!doctype html>
<html lang="ur">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Weather App — Pakistan</title>
  <style>
    :root{--bg:#071022;--card:#0b1220;--muted:#9aa6b2;--accent:#4f46e5}
    *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Roboto,Arial}
    body{margin:0;background:linear-gradient(180deg,#071022 0%,var(--bg) 100%);color:#e6eef6;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:18px}
    .app{width:100%;max-width:760px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:16px;border-radius:14px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .searchRow{display:flex;gap:8px;margin-top:12px}
    input[type=text]{flex:1;padding:12px;border-radius:10px;border:0;background:rgba(255,255,255,0.02);color:inherit}
    button{padding:10px 12px;border-radius:10px;border:0;background:var(--accent);color:white;font-weight:600}
    .small{font-size:13px;color:var(--muted)}
    .weatherMain{display:flex;gap:14px;align-items:center;margin-top:14px}
    .temp{font-size:36px;font-weight:700}
    .icon{width:72px;height:72px}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .forecast{display:flex;gap:8px;overflow:auto;margin-top:12px}
    .forecast .day{min-width:88px;background:rgba(255,255,255,0.02);padding:8px;border-radius:8px;text-align:center}
    footer{margin-top:12px;color:var(--muted);font-size:13px}
    @media(min-width:600px){.temp{font-size:48px}}
  </style>
</head>
<body>
  <div class="app">
    <header style="display:flex;align-items:center;gap:12px;margin-bottom:8px">
      <div>
        <h1 style="margin:0;font-size:18px">Pakistan Weather App</h1>
        <div class="small">Shehar ka naam likho ya location use karo</div>
      </div>
      <div style="margin-left:auto" class="small">Ready</div>
    </header>

    <div class="card">
      <div class="searchRow">
        <input id="cityInput" type="text" placeholder="Type city name e.g. Karachi" />
        <button id="searchBtn">Search</button>
        <button id="locBtn" title="Use device location">Locate</button>
      </div>

      <div id="status" class="small" style="margin-top:8px">Ready</div>

      <div id="result" style="display:none">
        <div class="weatherMain">
          <img id="icon" class="icon" src="" alt="icon" />
          <div>
            <div id="cityName" style="font-weight:700;font-size:16px"></div>
            <div class="temp" id="temp"></div>
            <div class="small" id="desc"></div>
          </div>
        </div>

        <div class="row" style="margin-top:10px">
          <div class="small">Humidity: <span id="humidity"></span>%</div>
          <div class="small">Wind: <span id="wind"></span> m/s</div>
          <div class="small">Pressure: <span id="pressure"></span> hPa</div>
        </div>

        <div class="forecast" id="forecast"></div>
      </div>

      <footer>
        Agar aap Termux backend use kar rahe hain to <code>API_BASE</code> set kar dijiye (eg. http://192.168.1.12:3000).
      </footer>
    </div>
  </div>

<script>
  /***** CONFIG *****/
  // Agar aap apna Termux backend use karna chahte ho to yahan uska URL daalein:
  const API_BASE = ""; // e.g. "http://192.168.1.12:3000" or public ngrok URL like "https://abcd.ngrok.io"

  // Agar API_BASE blank rahe to ye app direct OpenWeatherMap se fetch karega using the key:
  const OPENWEATHERMAP_KEY = "f43d3539f09f27b757303c721fe2c68e"; // <-- aapki key (development only)

  /***** DOM *****/
  const cityInput = document.getElementById('cityInput');
  const searchBtn = document.getElementById('searchBtn');
  const locBtn = document.getElementById('locBtn');
  const status = document.getElementById('status');
  const result = document.getElementById('result');
  const cityNameEl = document.getElementById('cityName');
  const tempEl = document.getElementById('temp');
  const descEl = document.getElementById('desc');
  const humidityEl = document.getElementById('humidity');
  const windEl = document.getElementById('wind');
  const pressureEl = document.getElementById('pressure');
  const iconEl = document.getElementById('icon');
  const forecastEl = document.getElementById('forecast');

  searchBtn.addEventListener('click', ()=>{ const q = cityInput.value.trim(); if(!q) return alert('City name likho'); fetchByCity(q); });
  cityInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter') searchBtn.click(); });
  locBtn.addEventListener('click', ()=>{ if(!navigator.geolocation) return alert('Geolocation not supported'); status.textContent='Getting location...'; navigator.geolocation.getCurrentPosition(pos=>{ const {latitude,longitude}=pos.coords; fetchByCoords(latitude,longitude); }, err=>{ status.textContent='Location denied or failed'; alert('Location access denied'); }); });

  /***** HELPERS *****/
  async function fetchByCity(city){
    status.textContent='Fetching...';
    try{
      const data = await fetchWeatherFromBackendOrOWM(city);
      showWeather(data);
    }catch(err){
      status.textContent='Error: '+(err.message || err);
    }
  }

  async function fetchByCoords(lat,lon){
    status.textContent='Fetching by coords...';
    try{
      if(API_BASE){
        const url = `${API_BASE.replace(/\/*$/,'')}/weather?lat=${lat}&lon=${lon}`;
        const res = await fetch(url);
        if(!res.ok) throw new Error('Server error '+res.status);
        const json = await res.json();
        showWeather(json);
      } else {
        const data = await fetchOWMByCoords(lat,lon);
        showWeather(data);
      }
    }catch(err){ status.textContent='Error: '+(err.message || err); }
  }

  async function fetchWeatherFromBackendOrOWM(city){
    if(API_BASE){
      // call backend (expects /weather/:city or /weather?city=)
      const url = `${API_BASE.replace(/\/*$/,'')}/weather/${encodeURIComponent(city)}`;
      const res = await fetch(url);
      if(!res.ok) throw new Error('Server error '+res.status);
      return await res.json();
    } else {
      return await fetchOWMByCity(city);
    }
  }

  async function fetchOWMByCity(city){
    if(!OPENWEATHERMAP_KEY) throw new Error('OPENWEATHERMAP_KEY not set');
    const url = `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(city)}&appid=${OPENWEATHERMAP_KEY}&units=metric`;
    const res = await fetch(url);
    if(!res.ok) throw new Error('OpenWeatherMap error '+res.status);
    return await res.json();
  }

  async function fetchOWMByCoords(lat,lon){
    if(!OPENWEATHERMAP_KEY) throw new Error('OPENWEATHERMAP_KEY not set');
    const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${OPENWEATHERMAP_KEY}&units=metric`;
    const res = await fetch(url);
    if(!res.ok) throw new Error('OpenWeatherMap error '+res.status);
    return await res.json();
  }

  function showWeather(data){
    try{
      const city = data.name + (data.sys && data.sys.country ? (', '+data.sys.country) : '');
      cityNameEl.textContent = city;
      tempEl.textContent = (Math.round(data.main.temp)) + '°C';
      descEl.textContent = data.weather && data.weather[0] ? data.weather[0].description : '';
      humidityEl.textContent = data.main.humidity;
      windEl.textContent = data.wind ? data.wind.speed : '-';
      pressureEl.textContent = data.main.pressure;
      if(data.weather && data.weather[0]){
        const ico = data.weather[0].icon;
        iconEl.src = `https://openweathermap.org/img/wn/${ico}@2x.png`;
        iconEl.alt = data.weather[0].description;
      }
      status.textContent = 'Updated: ' + new Date().toLocaleTimeString();
      result.style.display = 'block';
    }catch(err){ status.textContent='Display error'; console.error(err); }
  }

  // prefill ?city=...
  const params = new URLSearchParams(location.search);
  if(params.get('city')){ cityInput.value = params.get('city'); fetchByCity(params.get('city')); }
</script>
</body>
</html>
        <script>
        
        </script>
        </body>
        </html>